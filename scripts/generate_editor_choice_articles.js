const Database = require('better-sqlite3');
const db = new Database('anime.db');

// Delete existing "Editor's Choice" articles created previously to avoid duplicates
// unique constraint is on ID, but titles might be same. Let's delete by title.
const titlesToDelete = [
    'ğŸŒ¸ 2026 1æœˆæ–°ç•ªæ¨è–¦ï¼ˆä¸Šç¯‡ï¼‰ï¼šç¥ç´šçºŒä½œ Ã— éœ¸æ¬Šçˆ­å¥ªæˆ°',
    'ğŸŒ¸ 2026 1æœˆæ–°ç•ªæ¨è–¦ï¼ˆä¸‹ç¯‡ï¼‰ï¼šé»‘é¦¬æ–°ä½œ Ã— ç•°ä¸–ç•Œé©šå–œåŒ…'
];
titlesToDelete.forEach(t => {
    db.prepare('DELETE FROM articles WHERE title = ?').run(t);
    console.log(`Deleted old version of: ${t}`);
});

const upperList = [
    { title: 'å’’è¡“è¿´æˆ° æ­»æ»…è¿´æ¸¸ å‰ç¯‡', subtitle: 'ç´”æ„›æˆ°ç¥æ­£å¼åƒæˆ°ï¼', keyword: 'å’’è¡“', desc: 'æ¾€è°·äº‹è®Šå¾Œçš„æ—¥æœ¬å·²æˆå»¢å¢Ÿï¼Œå²ä¸Šæœ€æ®˜é…·çš„ç”Ÿå­˜éŠæˆ²ã€Œæ­»æ»…è¿´æ¸¸ã€æ­£å¼å•Ÿå‹•ã€‚é€™å­£æœ€å¤§çš„çœ‹é»è«éæ–¼ã€Œç´”æ„›æˆ°ç¥ã€ä¹™éª¨æ†‚å¤ªçµ‚æ–¼å¸¶è‘—ç‰¹ç´šéå’’æ€¨éˆç¾èº«ï¼Œè€Œä»–çš„ç›®æ¨™ç«Ÿç„¶æ˜¯â€”â€”è™•åˆ‘è™æ–æ‚ ä»ï¼é€™éƒ¨ä½œå“é‚£ç¨®çµ•æœ›åˆç˜‹ç‹‚çš„ç¾å­¸ï¼Œçµ•å°æ˜¯æ·±å¤œç¨è‡ªè¿½ç•ªæ™‚ï¼Œè®“è…ä¸Šè…ºç´ é£†å‡çš„æœ€ä½³é¸æ“‡ã€‚' },
    { title: 'è‘¬é€çš„èŠ™è‰è“® ç¬¬äºŒå­£', subtitle: 'é€™å°±æ˜¯æˆ‘å€‘ç­‰å¾…äº†ä¸€åƒå¹´çš„æº«æŸ”', keyword: 'èŠ™è‰è“®', desc: 'æ‹¿ä¸‹äº†ç„¡æ•¸å¤§ççš„ç¥ä½œå›æ­¸ã€‚é€™å­£å°‡é€²å…¥æ›´æ·±å±¤çš„å†’éšªã€Œä¸€ç´šé­”æ³•ä½¿æ¸¬é©—ç¯‡ã€ï¼Œä¸åƒ…æœ‰è¯éº—çš„é­”æ³•å°æ±ºï¼Œæ›´æœ‰å°å£½å‘½èˆ‡éºæ†¾çš„ç´°è†©æå¯«ã€‚ç•«è³ªç²¾ç¾åˆ°æ¯ä¸€å¹€éƒ½èƒ½ç•¶æ¡Œå¸ƒï¼Œæœ€é©åˆä¸‹ç­å¾Œæƒ³æ”¾é¬†çš„æ™‚åˆ»ï¼Œè®“å¦‚è©©å¦‚ç•«çš„æ¨‚ç« èˆ‡ç²¾éˆçš„ä½èªï¼Œæ´—æ»Œä½ ä¸€æ•´å¤©çš„ç–²æ†Šã€‚' },
    { title: 'ã€æˆ‘æ¨çš„å­©å­ã€‘ç¬¬ä¸‰å­£', subtitle: 'æ¼”è—åœˆçš„é»‘æš—é¢ï¼Œéœ²æ¯”å¾¹åº•é»‘åŒ–ï¼Ÿ', keyword: 'æˆ‘æ¨', desc: 'æ•…äº‹é‚å…¥å…¨æ–°éšæ®µï¼Œè·é›¢ã€ŠPOP IN 2ã€‹ç™¼è¡Œå·²éåŠå¹´ã€‚ç‚ºäº†è¿½å°‹çœŸç›¸ï¼Œéœ²æ¯”çš„çœ¼ç¥å¤±å»äº†å¾€æ—¥çš„å…‰å½©ï¼Œä¸€æ­¥æ­¥èµ°å‘æ¼”è—åœˆçš„é«˜å³°ã€‚é€™ä¸åªæ˜¯å¶åƒåŠ‡ï¼Œæ›´æ˜¯ä¸€éƒ¨æ­éœ²äººæ€§èˆ‡å¾©ä»‡çš„æ‡¸ç–‘å¤§ä½œï¼æ¨è–¦çµ¦å–œæ­¡æ·±åº¦ç‡’è…¦åŠ‡æƒ…çš„ä½ ï¼Œè·Ÿè‘—ä¸»è§’ä¸€èµ·æŒ–æ˜éš±è—åœ¨é–ƒè€€ç‡ˆå…‰ä¸‹çš„é»‘æš—çœŸç›¸ã€‚' },
    { title: 'Fate/strange Fake', subtitle: 'å¥ˆé ˆå®‡å®™æœ€å¼·å¤§çš„ã€Œè™›å½ã€ä¹‹ä½œ', keyword: 'Fate', desc: 'ç”±æˆç”°è‰¯æ‚ŸåŸ·ç­†ï¼Œåœ¨ç¾åœ‹ç™¼ç”Ÿçš„ã€Œè™›å½è–æ¯æˆ°çˆ­ã€ã€‚å› ç‚ºç³»çµ±ç¼ºé™·ï¼Œå¾è€…æˆ°åŠ›ç›´æ¥é€šè†¨ï¼Œé–ƒé–ƒã€æ©å¥‡éƒ½ç­‰ç¥ç´šè‹±éˆå†æ¬¡ç¢°æ’ã€‚ç¶“è²»ç‡ƒç‡’çš„ç‰¹æ•ˆä¿è­‰è¦–è¦ºé¥—å®´ï¼Œç•¶ä½ æƒ³è¦è¿½æ±‚æ¥µè‡´çš„æ„Ÿå®˜åˆºæ¿€æ™‚ï¼Œçœ‹é€™å ´é ‚ç´šé­”è¡“å¤§æˆ°å¦‚ä½•åœ¨ç¾ä»£åŸå¸‚ä¸­ç‹‚æš´å±•é–‹æº–æ²’éŒ¯ã€‚' },
    { title: 'ç‚ç‚æ¶ˆé˜²éšŠ åƒä¹‹ç« ', subtitle: 'ç”±ç«ç„°å¼•å°çš„æœ€çµ‚æ±ºæˆ°', keyword: 'ç‚ç‚', desc: 'ç¼ç†±å†’éšªçš„æœ€çµ‚ç« æ­£å¼é–‹å•Ÿï¼æ£®ç¾…èˆ‡ç‰¹æ®Šæ¶ˆé˜²éšŠè¯æ‰‹é˜»æ­¢ã€Œå¤§ç½å®³ã€ï¼Œå®ˆè­·ä¸–ç•Œçš„è‹±é›„èˆ‡ç‡ƒç‡’çš„å‘½é‹å°‡è¿ä¾†æœ€çµ‚äº¤é‹’ã€‚é ‚ç´šçš„æ‰“é¬¥ä½œç•«èˆ‡æ²‰é‡éŸ³æ•ˆï¼Œçµ•å°è®“ä½ ç†±è¡€æ²¸é¨°ï¼é€™æ˜¯åœ¨éœ€è¦ææŒ¯å£«æ°£ã€é»ç‡ƒç†±è¡€çš„ç¬é–“å¿…çœ‹çš„ä½œå“ï¼Œçœ‹ä¸»è§’å¦‚ä½•ç”¨é›™è…³è¸ç ´çµ•æœ›ã€‚' },
    { title: 'çµ¦ä¸æ»…çš„ä½  ç¬¬ä¸‰å­£', subtitle: 'è·¨è¶Šåƒå¹´çš„ç¾ä»£ç¯‡ç« ', keyword: 'ä¸æ»…', desc: 'ä¸æ»…çš„å­˜åœ¨ã€Œä¸æ­»ã€ä¾†åˆ°äº†å’Œå¹³çš„ç¾ä»£ä¸–ç•Œã€‚ç„¶è€Œï¼Œå¹³éœçš„ç”Ÿæ´»ä¸‹é™°å½±å†æ¬¡é€¼è¿‘ã€‚é€™æ˜¯ä¸€éƒ¨æ¢è¨ç”Ÿå‘½æ„ç¾©çš„å®å¤§å²è©©ï¼Œç•«é¢¨èˆ‡æ•˜äº‹å……æ»¿äº†åšé‡çš„å“²å­¸æ€è€ƒã€‚éå¸¸é©åˆåœ¨æƒ³è¦å¤§å“­ä¸€å ´ã€é‡‹æ”¾å£“åŠ›çš„é›¨å¤©è§€çœ‹ï¼Œè®“ä½ é‡æ–°æ€è€ƒä½•è¬‚éˆé­‚çš„å»¶çºŒèˆ‡è¨˜æ†¶çš„é‡é‡ã€‚' },
    { title: 'è¼å¤œå§¬æƒ³è®“äººå‘Šç™½ é‚å‘å¤§äººçš„éšæ¢¯', subtitle: 'åˆå»ä¹‹å¾Œçš„æ¥µé™æ‹‰æ‰¯', keyword: 'è¼å¤œ', desc: 'å‚²å¬Œèˆ‡å‚²å¬Œçš„å°æ±ºè¿ä¾†æœ€é«˜æ½®ï¼ç™½éŠ€å¤§è†½é‚€è«‹è¼å¤œåˆ°æ–°å®¶ç¨è™•å…±é€²æ™šé¤ï¼Œåœ¨æ²’æœ‰æ—äººçš„æƒ…æ³ä¸‹ï¼Œé€™å ´æˆ€æ„›é ­è…¦æˆ°æ˜¯å¦æœƒæ¼”è®Šæˆæœ€ç”œèœœçš„æŠ•é™ï¼Ÿå¦‚æœä½ æƒ³åº¦éä¸€å€‹ç”œé¹¹äº¤ç¹”ã€å¿ƒè·³åŠ é€Ÿçš„é€±æœ«åˆå¾Œï¼Œé€™éƒ¨ä½œå“çš„æ¥µé™æ‹‰æ‰¯æ„Ÿçµ•å°èƒ½æ»¿è¶³ä½ ã€‚' },
    { title: 'MF Ghost ç‡ƒæ²¹è»Šé¬¥é­‚ ç¬¬ä¸‰å­£', subtitle: '86 ç²¾ç¥çš„æ¥µé™é€²åŒ–', keyword: 'MF Ghost', desc: 'ç‰‡æ¡å¤å‘æŒ‘æˆ°ã€ŒçœŸé¶´ã€è³½é“ï¼Œé¢å°æˆ°é¬¥åŠ›æå‡çš„å°æ‰‹èˆ‡çªå¦‚å…¶ä¾†çš„æ‰‹å‚·ã€‚è³½è»Šè¿·çµ•ä¸å¯éŒ¯éçš„æ­ç¾…ç¯€å¥é…æ¨‚èˆ‡éœ‡æ’¼å¼•æ“è²ï¼Œæ˜¯é€Ÿåº¦èˆ‡æ¿€æƒ…çš„æ¥µè‡´å‘ˆç¾ã€‚ç•¶ä½ æ„Ÿåˆ°ç”Ÿæ´»ä¹å‘³éœ€è¦ä¸€é»è¡å‹æ™‚ï¼Œå°±ä¾†æ„Ÿå—å¼•æ“åœ¨è³½é“ä¸Šå˜¶å¼çš„å¿«æ„Ÿå§ï¼' },
    { title: 'é­”éƒ½ç²¾å…µçš„å¥´éš¸ ç¬¬äºŒå­£', subtitle: 'çµ„é•·å…¨é«”é›†çµï¼Œå…¨æ–°çš„æˆ°é¬¥ï¼', keyword: 'é­”éƒ½', desc: 'å„ªå¸Œèˆ‡äº¬é¦™é€™æ¬¡è¦åƒåŠ å…¨é«”çµ„é•·é½Šèšçš„ã€Œçµ„é•·æœƒã€ï¼Œå…¨æ–°å¨è„…ã€Šå…«é›·ç¥ã€‹è ¢è ¢æ¬²å‹•ã€‚é™¤äº†ç·Šå¼µçš„æˆ°é¬¥ï¼Œç¦åˆ©æ»¿é»çš„ã€Œçå‹µæ™‚é–“ã€ä¹Ÿæ˜¯æœ¬å­£çš„ä¸€å¤§é‡é»ï¼æœ€é©åˆç¨è‡ªåœ¨å®¶æƒ³è¦å¾¹åº•æ”¾é¬†æ™‚ï¼Œäº«å—çˆ½å¿«æˆ°é¬¥èˆ‡è¦–è¦ºç¦åˆ©çš„é›™é‡é¥—å®´ã€‚' },
    { title: 'è—è‰²ç®¡å¼¦æ¨‚ ç¬¬äºŒå­£', subtitle: 'å¥éŸ¿é’æ˜¥çš„æœ€å¼·éŸ³', keyword: 'ç®¡å¼¦', desc: 'ä»¥ç®¡å¼¦æ¨‚ç¤¾ç‚ºèˆå°çš„é’æ˜¥ç‰©èªå›æ­¸ã€‚ç´°è†©çš„æ¨‚å™¨æ¼”å¥èˆ‡å°‘å¹´å°‘å¥³é–“é’æ¾€å»å……æ»¿çˆ†ç™¼åŠ›çš„æƒ…æ„Ÿï¼Œæ˜¯å–œæ„›éŸ³æ¨‚èˆ‡æ ¡åœ’é¡Œæçš„ä½ é¦–é¸ã€‚ç•¶ä½ æ„Ÿåˆ°å¾¬å¾¨æˆ–éœ€è¦å¹³éœæ™‚ï¼Œé€™éƒ¨ä½œå“å„ªç¾çš„å¤å…¸æ¨‚éŸ³ï¼Œå°‡å¸¶ä½ é‡å›é‚£å€‹å……æ»¿å¤¢æƒ³çš„å¤å¤©ã€‚' }
];

const lowerList = [
    { title: 'ç•°åœ‹æ—¥è¨˜', subtitle: 'è·¨è¶Šä»£æºçš„éˆé­‚æ•‘è´–', keyword: 'ç•°åœ‹', desc: 'æ€§æ ¼å­¤åƒ»çš„å°èªªå®¶èˆ‡å¤±å»é›™è¦ªçš„å¤–ç”¥å¥³ï¼Œå…©å€‹å®Œå…¨ä¸åŒä¸–ç•Œçš„äººå±•é–‹åŒå±…ç”Ÿæ´»ã€‚é€™æ˜¯ä¸€éƒ¨æº«æŸ”åˆ°æ¥µé»çš„ä½œå“ï¼Œæ·±åˆ»æ¢è¨äººèˆ‡äººä¹‹é–“çš„è·é›¢ï¼Œå……æ»¿äº†ç´°è†©çš„ç”Ÿæ´»æ„Ÿã€‚å»ºè­°æ³¡æ¯ç†±èŒ¶ï¼Œåœ¨éœè¬çš„å‚æ™šç¨è‡ªå“å‘³ï¼Œæ„Ÿå—å¿ƒéˆè¢«æº«æŸ”åŒ…è£¹çš„è§¸æ„Ÿã€‚' },
    { title: 'æ±å³¶ä¸¹ä¸‰éƒæƒ³æˆç‚ºå‡é¢é¨å£«', subtitle: 'å¤§å”èªçœŸèµ·ä¾†ä¸–ç•Œéƒ½è¦é¡«æŠ–', keyword: 'æ±å³¶', desc: '40 æ­²å¤§å”èªçœŸç©ã€Œå‡é¢é¨å£«å®¶å®¶é…’ã€å»æˆçœŸï¼Ÿé€™æ˜¯ä¸€éƒ¨ç»çµ¦æ‰€æœ‰ç†±æ„›ç‰¹æ”çš„å¤§äººå€‘çš„æ¥µè‡´æƒ…æ›¸ï¼Œå……æ»¿äº†è€æ´¾æ­£ç¾©æ„Ÿèˆ‡ç¡¬æ ¸æµªæ¼«ã€‚ç•¶ä½ è¦ºå¾—è¢«ç¤¾æœƒç£¨å¹³ç¨œè§’æ™‚ï¼Œé€™éƒ¨ä½œå“çš„å¤§å”é­‚èƒ½å¹«ä½ æ‰¾å›é‚£é¡†æ›¾ç¶“æƒ³æ‹¯æ•‘ä¸–ç•Œçš„èµ¤å­ä¹‹å¿ƒã€‚' },
    { title: 'ç›¸åçš„ä½ å’Œæˆ‘', subtitle: 'ç”œåº¦è¶…æ¨™ï¼Jump+ çš„ç´”æ„›æ¸…æµ', keyword: 'ç›¸å', desc: 'æ´»åŠ›å°‘å¥³éˆ´æœ¨èˆ‡æ–‡éœç”·è°·åŒå­¸ï¼Œå› ç‚ºåœ¨æ„å°æ–¹è€Œå±•é–‹çš„é…¸ç”œæ—¥å¸¸ã€‚æ²’æœ‰è¤‡é›œçš„å‹¾å¿ƒé¬¥è§’ï¼Œåªæœ‰æœ€ç´”ç²¹ã€è®“äººå¿ä¸ä½éœ²å‡ºå§¨æ¯ç¬‘çš„åˆæˆ€æ°›åœã€‚éœ€è¦å¿ƒæƒ…å¤§å¥½ã€è£œå……ç³–åˆ†æ™‚ï¼Œé€™å°äº’è£œæƒ…ä¾¶çµ•å°èƒ½èŒç¿»ä½ çš„å…¨ä¸–ç•Œã€‚' },
    { title: 'åˆ¤è™•å‹‡è€…åˆ‘ æ‡²ç½°å‹‡è€…9004éšŠåˆ‘å‹™ç´€éŒ„', subtitle: 'é€™å‹‡è€…ï¼Œæˆ‘ä¸ç•¶å•¦ï¼', keyword: 'åˆ¤è™•', desc: 'è¨­å®šè¶…å¸ç›ï¼é‡ç½ªçŠ¯è¢«è¿«ç©¿ä¸Šå‹‡è€…æœï¼Œåœ¨æ­»ä¸äº†çš„æœ€å‰ç·šå±•é–‹è‡ªæ®ºå¼æˆ°é¬¥ã€‚é¢¨æ ¼ç‹‚æ°£ï¼Œæ¢è¨çµ•æœ›ä¸­çš„äººæ€§å…‰è¼ï¼Œæ˜¯æœ¬å­£æœ€æœ‰çˆ½æ„Ÿçš„é»‘é¦¬ã€‚å¦‚æœä½ å­å€¦äº†ç‹é“å¥—è·¯ï¼Œæƒ³çœ‹é»‘æš—ã€åè‹±é›„çš„æš´åŠ›ç¾å­¸ï¼Œé¸é€™éƒ¨æº–æ²’éŒ¯ã€‚' },
    { title: 'é­”è¡“å¸«åº«è«¾çœ‹å¾—è¦‹ä¸€åˆ‡', subtitle: 'å¤±æ˜å°‘å¹´çš„æ°´ç³»é­”è¡“å‚³å¥‡', keyword: 'é­”è¡“å¸«', desc: 'è‡ªå¹¼å¤±æ˜çš„åº«è«¾åˆ©ç”¨æ°´ç³»é­”è¡“ç‚ºè‡ªå·±å‰µé€ ã€Œçœ¼ã€ã€‚ä»–çš„å¤©è³¦å……æ»¿æƒ³åƒåŠ›ï¼Œä½œå“æ°›åœæ¸…æ–°ä¸”å¯Œæœ‰å±¤æ¬¡æ„Ÿï¼Œå±•ç¾äº†ä¸€å€‹å……æ»¿é­”åŠ›èˆ‡è‰²å½©çš„æº«é¦¨æ•…äº‹ã€‚æƒ³æ›å€‹è¦–è§’çœ‹ä¸–ç•Œæ™‚ï¼Œå°±ä¾†äº«å—é€™å€‹æº«æŸ”ä¸”å¯Œæœ‰å‰µé€ åŠ›çš„æˆé•·æ—…ç¨‹å§ã€‚' },
    { title: 'è½‰ç”Ÿä¹‹å¾Œçš„æˆ‘è®Šæˆäº†é¾è›‹', subtitle: 'é€²åŒ–å§ï¼æœ€å¼·ä¹‹è›‹', keyword: 'é¾è›‹', desc: 'è½‰ç”Ÿæˆä¸€é¡†è›‹è©²æ€éº¼è¾¦ï¼Ÿåœ¨å……æ»¿é­”ç¸çš„æ£®æ—è£¡æ‹¼å‘½ç‹©çµã€æå‡ç­‰ç´šã€‚çœ‹ä¸€é¡†è›‹å¦‚ä½•ç”¨æœ€è»Ÿ Q çš„å§¿æ…‹å®Œæˆä¸–ç•Œæœ€å¼·çš„é€²åŒ–ã€‚ç¯€å¥è¼•å¿«ï¼Œéå¸¸é©åˆåƒé£¯é…é£¯ã€å¤§è…¦æ”¾é¬†æ™‚è§€çœ‹ï¼Œäº«å—é‚£ç¨®é¤Šæˆç³»éŠæˆ²èˆ¬çš„å‡ç´šå¿«æ„Ÿã€‚' },
    { title: 'å¾å‰å¾å‰æœ‰éš»è²“ï¼ä¸–ç•Œå–µç«¥è©±', subtitle: 'å…¨äººé¡å–µåŒ–è¨ˆç•«å•Ÿå‹•', keyword: 'æœ‰éš»è²“', desc: 'ç•¶ä¸–ç•Œç¶“å…¸ç«¥è©±çš„ä¸»è§’é€šé€šè®Šæˆè²“ï¼Œæ•…äº‹ç™¼å±•å°‡æœƒè®Šå¾—å¤šéº¼è¶…ç¾å¯¦èˆ‡æ²»ç™’ï¼Ÿåªè¦å¹¾åˆ†é˜ï¼Œå°±èƒ½è®“ä½ çš„ç”Ÿæ´»å£“åŠ›ç…™æ¶ˆé›²æ•£ã€‚ç•¶ä½ æ„Ÿåˆ°å£“åŠ›çˆ†ç‚¸ã€å¿ƒåŠ›æ†”æ‚´æ™‚ï¼Œè®“è²“å’ªçš„é‚è¼¯å¸¶ä½ é€ƒé›¢ç¾å¯¦ä¸‰åˆ†é˜æ˜¯æœ€æ£’çš„è§£è—¥ã€‚' },
    { title: 'GNOSIA', subtitle: 'å®‡å®™èˆ¹ä¸Šçš„çµ‚æ¥µäººç‹¼éŠæˆ²', keyword: 'GNOSIA', desc: 'æ”¹ç·¨è‡ªåŒåç¥ä½œéŠæˆ²ã€‚åœ¨æ¼‚æµçš„å®‡å®™èˆ¹ä¸­ï¼Œèª°æ˜¯å½è£æˆäººé¡çš„æ•µäººã€ŒGNOSIAã€ï¼Ÿç–‘å¿ƒæš—é¬¼çš„å¿ƒç†åšå¼ˆï¼ŒåŠ‡æœ¬æ¥µå…¶ç´®å¯¦ï¼Œæ‡¸ç–‘æ„Ÿåè¶³ã€‚é©åˆåœ¨æƒ³è¦æ¨ç†ã€çŒœç–‘ã€é«”é©—å¤ªç©ºæ‡¸ç–‘æ°›åœçš„å†·éœåˆå¾Œè§€è³ã€‚' },
    { title: 'é æ­»äº¡éŠæˆ²æ··é£¯åƒã€‚', subtitle: 'å°‘å¥³å€‘çš„çµ•å¢ƒè³­åš', keyword: 'æ­»äº¡éŠæˆ²', desc: 'è·æ¥­æ˜¯æ®ºäººéŠæˆ²çš„å°ˆæ¥­äººå£«ã€‚åœ¨é€™å€‹åªè¦ç”Ÿå­˜å°±èƒ½ç²å¾—å·¨é¡çé‡‘çš„ä¸–ç•Œï¼Œå°‘å¥³å€‘å±•é–‹äº†ä¸€å ´ç˜‹ç‹‚çš„æ™ºåŠ›èˆ‡é«”åŠ›å°æŠ—ï¼Œå±•ç¾æ¥µé™ç‹€æ…‹ä¸‹çš„ç”Ÿå­˜æœ¬èƒ½ã€‚æƒ³è¦å¿ƒè·³åŠ é€Ÿã€é«”é©—ç”Ÿå­˜å£“è¿«æ„Ÿçš„æ™‚åˆ»ï¼Œçœ‹ä¸»è§’å¦‚ä½•ç”¨æ™ºåŠ›ç¿»ç›¤çµ•å°éç™®ã€‚' },
    { title: 'ç¾åœ¨çš„æ˜¯å“ªä¸€å€‹å¤šèï¼?', subtitle: 'è¿½æ˜Ÿè¿½åˆ°æˆ‘æ¨å®¶', keyword: 'å¤šè', desc: 'ç•¶ç´…å¶åƒç§åº•ä¸‹ç«Ÿç„¶æ˜¯è¶…ç´šé™°æ²‰çš„è² é¢èƒ½é‡è£½é€ æ©Ÿï¼Ÿåå·®èŒé»æ»¿ï¼Œå°æ–¼è¿·å¦¹ã€è¿·å¼Ÿçš„å¿ƒæƒ…æå¯«è¶…ç´šç²¾æº–ï¼Œæ˜¯ä¸€å ´å……æ»¿ç¬‘æ–™èˆ‡å¿ƒå‹•çš„è¿½æ˜Ÿå–œåŠ‡ã€‚æƒ³è¦æ”¾è²å¤§ç¬‘ã€éœ€è¦å¿ƒæƒ…æ„‰æ‚…æ™‚ï¼Œé€™å°è¶…åå·®å¶åƒèˆ‡ç²‰çµ²çš„é¬§åŠ‡çµ•å°èƒ½æ»¿è¶³ä½ ã€‚' }
];

function getImageAndLink(keyword) {
    let row = db.prepare('SELECT title, image_url, url FROM myvideo_library WHERE title LIKE ? AND image_url IS NOT NULL').get('%' + keyword + '%');

    // Fallback logic SAME as before
    if (!row && keyword === 'æˆ‘æ¨') {
        return {
            image: 'https://d28s5ztqvkii64.cloudfront.net/images/anime/5505/slfBxrWWvq.jpg',
            url: 'https://www.myvideo.net.tw/details/3/23277'
        };
    }

    if (row) {
        return {
            image: row.image_url,
            url: row.url || 'https://www.myvideo.net.tw/'
        };
    }

    return {
        image: 'https://placehold.co/600x400/EEE/31343C?text=' + encodeURIComponent(keyword),
        url: 'https://www.myvideo.net.tw/'
    };
}

function generateContent(items) {
    let content = '';
    items.forEach((item, index) => {
        const data = getImageAndLink(item.keyword);
        const idx = index + 1;
        content += `## ${idx}. ${item.title}\n`; // Title
        content += `![${item.title}](${data.image})\n`; // Image (Single newline to avoid <br>)
        content += `### ${item.subtitle}\n\n`; // Subtitle strictly after image
        content += `${item.desc}\n\n`; // Body
        content += `<a href="${data.url}" class="btn-orange-small" target="_blank">å‰å¾€MyVideoç·šä¸Šè§€çœ‹</a>\n\n`; // Link
        content += `\n---\n\n`;
    });
    return content;
}

// Generate Upper
console.log('Generating Upper Article...');
const contentUpper = generateContent(upperList);
const coverUpper = getImageAndLink(upperList[0].keyword).image;

db.prepare(`
    INSERT INTO articles (title, content, image_url, category, published_at, myvideo_url) 
    VALUES (?, ?, ?, ?, ?, ?)
`).run(
    'ğŸŒ¸ 2026 1æœˆæ–°ç•ªæ¨è–¦ï¼ˆä¸Šç¯‡ï¼‰ï¼šç¥ç´šçºŒä½œ Ã— éœ¸æ¬Šçˆ­å¥ªæˆ°',
    contentUpper,
    coverUpper,
    'ç·¨è¼¯ç²¾é¸',
    new Date().toISOString(),
    null
);

// Generate Lower
console.log('Generating Lower Article...');
const contentLower = generateContent(lowerList);
const coverLower = getImageAndLink(lowerList[0].keyword).image;

db.prepare(`
    INSERT INTO articles (title, content, image_url, category, published_at, myvideo_url) 
    VALUES (?, ?, ?, ?, ?, ?)
`).run(
    'ğŸŒ¸ 2026 1æœˆæ–°ç•ªæ¨è–¦ï¼ˆä¸‹ç¯‡ï¼‰ï¼šé»‘é¦¬æ–°ä½œ Ã— ç•°ä¸–ç•Œé©šå–œåŒ…',
    contentLower,
    coverLower,
    'ç·¨è¼¯ç²¾é¸',
    new Date().toISOString(),
    null
);

console.log('Done!');
